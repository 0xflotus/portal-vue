!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):t.VuePortal=e(t.Vue)}(this,function(t){"use strict";function e(t,e){void 0===e&&(e={}),t.component(e.portalName||"portal",a),t.component(e.portalTargetName||"portal-target",i)}t="default"in t?t.default:t;var n={},o=new t({methods:{sendUpdate:function(t,e){n[t]=e,this.$emit(t,e)},get:function(t){return n[t]||null},clear:function(t){n[t]=null,this.$emit(t,null)}}}),i={name:"portalTarget",props:{name:{type:String,required:!0},id:{type:String},tag:{type:String,default:"div"}},beforeMount:function(){this.checkWormhole(),o.$on(this.name,this.update)},beforeDestroy:function(){this.$el.innerHTML="",o.$off(this.name,this.update)},watch:{name:function(t,e){o.$off(e,this.update),o.$on(t,this.update),this.checkWormhole()}},methods:{checkWormhole:function(){var t=o.get(this.name);this.update(t)},update:function(t){t?this.passengers=t:this.passengers=null,this.$forceUpdate()}},render:function(t){return t(this.tag,{class:{"vue-portal-target":!0},attrs:{id:this.id&&this.id.substr(1)||!1}},this.passengers)}},a={name:"portal",props:{to:{type:String,required:!0},mountTarget:{type:String}},beforeMount:function(){this.mountTarget&&this.mountToTarget(),this.sendUpdate()},beforeUpdate:function(){this.sendUpdate()},beforeDestroy:function(){o.clear(this.to),this.mountedComp&&this.mountedComp.$destroy()},watch:{to:function(t,e){e&&o.sendUpdate(e,null),this.sendUpdate()},mountTarget:function(t,e){this.mountToTarget()}},methods:{sendUpdate:function(){this.to?o.sendUpdate(this.to,this.$slots.default):console.warn("[vue-portal]: You have to define a targte via the `to` prop.")},mountToTarget:function(){var e=document.querySelector(this.mountTarget);if(e){var n=new t(Object.assign({},i,{propsData:{name:this.to||Math.round(1e4*Math.random()),id:this.mountTarget,tag:e.tagName}}));n.$mount(e),this.mountedComp=n}else console.warn("[vue-porta]: The specified mountTarget "+this.mountTarget+" was not found")}},render:function(t){return null}},r={install:e,Portal:a,PortalTarget:i};return r});
